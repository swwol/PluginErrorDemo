#  SwiftyMockyPlugin

A build tool plugin for generating SwiftyMockyMocks

This plugin uses the binary from Sourcery 2.0.1 
and the templates from SwiftyMocky 4.2.0 to create Mocks. The end result should be the same as running swiftymocky "the old way."

see https://github.com/MakeAWishFoundation/SwiftyMocky/blob/master/guides/Legacy.md for details of creating SwiftyMockyMocks using Sourcery directly.

## Usage:

Any package that you want to run this plugin needs a config file called **'swiftyMocky.yml'**
For Swift Packages, the plugin will look for this file in first in the package root, and then in the root of the target directory, and it will use the first instance it finds. 
For Xcode projets, it will look first in the project root, and then in a folder named after the target at the project root. 
(This makes it possible to use different configuration files for multiple targets in the same project)

Structure of this file should be the same as the **'sourcery.yml'** described in link above, but without the **templates** and **outputs** sections - these will be generated by the plugin.

The plugin will regenerate the Mocks if any of the source files in any target in the package containing the target that uses the plugin is changed. 


## implementation details

Plugin first checks for a swiftyMocky.yml file at package root, and doesn't run if not there

Then it writes the template file needed by SwiftyMocky to the plugin work directory. Plugins cannot have resource files yet, so this is stored as a string in the code.

Then it reads swiftyMocky.yml into memory and modifies it to use the absolute paths rather than relative paths, and it adds the paths for the template and output file. And it save this modified file to the pluginWorkDirectory

Then it generates the Mocks using the Sourcery binary with the modified config file.
